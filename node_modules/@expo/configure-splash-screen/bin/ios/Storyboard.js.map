{"version":3,"file":"Storyboard.js","sourceRoot":"","sources":["../../src/ios/Storyboard.ts"],"names":[],"mappings":";;;;;AACA,gDAAwB;AAExB,4CAA0C;AAC1C,kDAAwD;AACxD,oCAAsD;AAGtD,MAAM,oBAAoB,GAAG,2BAA2B,CAAC;AAEzD;;;GAGG;AACH,SAAS,gBAAgB,CAAC,EAAE,WAAW,EAAE,UAAU,EAAE,uBAAuB,EAAc;IACxF,mEAAmE;IACnE,mCAAmC;IACnC,MAAM,kBAAkB,GAAG,cAAI,CAAC,IAAI,CAAC,WAAW,EAAE,oBAAoB,CAAC,CAAC;IACxE,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,kBAAkB,CAAC,EAAE;QAC3C,MAAM,KAAK,GAAG,UAAU,CAAC,eAAe,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC,CAAC;QAChE,IAAI,CAAC,KAAK,EAAE;YACV,MAAM,IAAI,KAAK,CAAC,oDAAoD,CAAC,CAAC;SACvE;QACD,kCAA0B,CAAC,UAAU,EAAE,kBAAkB,EAAE;YACzD,MAAM,EAAE,uBAAuB,CAAC,IAAI;YACpC,KAAK;SACN,CAAC,CAAC;KACJ;AACH,CAAC;AAED;;;GAGG;AACY,KAAK,UAAU,mBAAmB,CAC/C,UAAsB,EACtB,EACE,UAAU,EACV,eAAe,EACf,wBAAwB,GAKzB;IAED,IAAI,WAAmB,CAAC;IACxB,QAAQ,UAAU,EAAE;QAClB,KAAK,sBAAU,CAAC,OAAO;YACrB,WAAW,GAAG,gBAAgB,CAAC;YAC/B,MAAM;QACR,KAAK,sBAAU,CAAC,KAAK;YACnB,WAAW,GAAG,iBAAiB,CAAC;YAChC,MAAM;QACR;YACE,MAAM,IAAI,KAAK,CAAC,gBAAgB,UAAU,qCAAqC,CAAC,CAAC;KACpF;IAED,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,eAAe,CAAC,KAAK,CAAC;IAC3C,MAAM,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;IACpB,MAAM,KAAK,GAAG,CAAC,GAAG,GAAG,CAAC;IACtB,MAAM,IAAI,GAAG,CAAC,GAAG,GAAG,CAAC;IACrB,MAAM,KAAK,GAAG,CAAC,CAAC;IAEhB,MAAM,QAAQ,GAAG,cAAI,CAAC,OAAO,CAAC,UAAU,CAAC,WAAW,EAAE,oBAAoB,CAAC,CAAC;IAC5E,MAAM,oCAAqB,CACzB,QAAQ,EACR;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2BAiCuB,WAAW;;2CAGxB,wBAAwB,CAAC,CAAC,CAAC,oCAAoC,CAAC,CAAC,CAAC,EACpE;;;;;gDAKoC,GAAG,YAAY,KAAK,WAAW,IAAI,YAAY,KAAK;;;;;;;;;;;;;CAanG,CACE,CAAC;IAEF,MAAM,gBAAgB,CAAC,UAAU,CAAC,CAAC;AACrC,CAAC;AA5FD,sCA4FC","sourcesContent":["import { ColorDescriptor } from 'color-string';\nimport path from 'path';\n\nimport { ResizeMode } from '../constants';\nimport { createDirAndWriteFile } from '../file-helpers';\nimport { addStoryboardFileToProject } from '../xcode';\nimport { IosProject } from './pbxproj';\n\nconst STORYBOARD_FILE_PATH = './SplashScreen.storyboard';\n\n/**\n * Modifies `.pbxproj` by:\n * - adding reference for `.storyboard` file\n */\nfunction updatePbxProject({ projectName, pbxProject, applicationNativeTarget }: IosProject): void {\n  // Check if `${projectName}/SplashScreen.storyboard` already exists\n  // Path relative to `ios` directory\n  const storyboardFilePath = path.join(projectName, STORYBOARD_FILE_PATH);\n  if (!pbxProject.hasFile(storyboardFilePath)) {\n    const group = pbxProject.findPBXGroupKey({ name: projectName });\n    if (!group) {\n      throw new Error(`Couldn't locate proper PBXGroup '.xcodeproj' file.`);\n    }\n    addStoryboardFileToProject(pbxProject, storyboardFilePath, {\n      target: applicationNativeTarget.uuid,\n      group,\n    });\n  }\n}\n\n/**\n * Creates [STORYBOARD] file containing ui description of Splash/Launch Screen.\n * > WARNING: modifies `pbxproj`\n */\nexport default async function configureStoryboard(\n  iosProject: IosProject,\n  {\n    resizeMode,\n    backgroundColor,\n    splashScreenImagePresent,\n  }: {\n    resizeMode: ResizeMode;\n    backgroundColor: ColorDescriptor;\n    splashScreenImagePresent: boolean;\n  }\n) {\n  let contentMode: string;\n  switch (resizeMode) {\n    case ResizeMode.CONTAIN:\n      contentMode = 'scaleAspectFit';\n      break;\n    case ResizeMode.COVER:\n      contentMode = 'scaleAspectFill';\n      break;\n    default:\n      throw new Error(`resizeMode = ${resizeMode} is not supported for iOS platform.`);\n  }\n\n  const [r, g, b, a] = backgroundColor.value;\n  const red = r / 255;\n  const green = g / 255;\n  const blue = b / 255;\n  const alpha = a;\n\n  const filePath = path.resolve(iosProject.projectPath, STORYBOARD_FILE_PATH);\n  await createDirAndWriteFile(\n    filePath,\n    `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<document\n  type=\"com.apple.InterfaceBuilder3.CocoaTouch.Storyboard.XIB\"\n  version=\"3.0\"\n  toolsVersion=\"15705\"\n  targetRuntime=\"iOS.CocoaTouch\"\n  propertyAccessControl=\"none\"\n  useAutolayout=\"YES\"\n  launchScreen=\"YES\"\n  useTraitCollections=\"YES\"\n  useSafeAreas=\"YES\"\n  colorMatched=\"YES\"\n  initialViewController=\"EXPO-VIEWCONTROLLER-1\"\n>\n  <device id=\"retina6_1\" orientation=\"portrait\" appearance=\"light\"/>\n  <dependencies>\n    <deployment identifier=\"iOS\"/>\n    <plugIn identifier=\"com.apple.InterfaceBuilder.IBCocoaTouchPlugin\" version=\"15706\"/>\n    <capability name=\"documents saved in the Xcode 8 format\" minToolsVersion=\"8.0\"/>\n  </dependencies>\n  <scenes>\n    <!--View Controller-->\n    <scene sceneID=\"EXPO-SCENE-1\">\n      <objects>\n        <viewController\n          storyboardIdentifier=\"SplashScreenViewController\"\n          id=\"EXPO-VIEWCONTROLLER-1\"\n          sceneMemberID=\"viewController\"\n        >\n          <imageView\n            key=\"view\"\n            clipsSubviews=\"YES\"\n            userInteractionEnabled=\"NO\"\n            contentMode=\"${contentMode}\"\n            horizontalHuggingPriority=\"251\"\n            verticalHuggingPriority=\"251\"${\n              splashScreenImagePresent ? '\\n            image=\"SplashScreen\"' : ''\n            }\n            id=\"EXPO-IMAGEVIEW-1\"\n          >\n            <rect key=\"frame\" x=\"0.0\" y=\"0.0\" width=\"800\" height=\"1600\"/>\n            <autoresizingMask key=\"autoresizingMask\" flexibleMaxX=\"YES\" flexibleMaxY=\"YES\"/>\n            <color key=\"backgroundColor\" red=\"${red}\" green=\"${green}\" blue=\"${blue}\" alpha=\"${alpha}\" colorSpace=\"custom\" customColorSpace=\"sRGB\"/>\n          </imageView>\n          <size key=\"freeformSize\" width=\"800\" height=\"1600\"/>\n        </viewController>\n        <placeholder placeholderIdentifier=\"IBFirstResponder\" id=\"EXPO-PLACEHOLDER-1\" userLabel=\"First Responder\" sceneMemberID=\"firstResponder\"/>\n      </objects>\n      <point key=\"canvasLocation\" x=\"141\" y=\"130\"/>\n    </scene>\n  </scenes>\n  <resources>\n    <image name=\"SplashScreen\" width=\"600\" height=\"1200\"/>\n  </resources>\n</document>\n`\n  );\n\n  await updatePbxProject(iosProject);\n}\n"]}